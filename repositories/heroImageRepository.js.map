{"version":3,"sources":["../../src/repositories/heroImageRepository.js"],"names":["HeroImageRepository","baseRepository","constructor","HeroImage","removeImagebyId","imageId","getById","then","data","image","imagePath","model","attributes","thumbnail","thumbnailPath","original","originalPath","fs","existsSync","unlinkSync","remove"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA;;;AAGA,MAAMA,mBAAN,SAAkCC,uBAAlC,CAAiD;AAC/C;;;AAGAC,EAAAA,WAAW,GAAG;AACZ,UAAMC,mBAAN;AACD;AAED;;;;;;;AAKAC,EAAAA,eAAe,CAACC,OAAD,EAAU;AACvB,WAAO,KAAKC,OAAL,CAAaD,OAAb,EAAsBE,IAAtB,CAA4BC,IAAD,IAAU;AAC1C,YAAMC,KAAK,GAAGC,wBAAY,GAAZ,IAAmBF,IAAI,CAACG,KAAL,CAAWC,UAAX,CAAsBH,KAAtB,IAA+B,EAAlD,CAAd;AACA,YAAMI,SAAS,GAAGC,4BAAgB,GAAhB,GAAsBN,IAAI,CAACG,KAAL,CAAWC,UAAX,CAAsBC,SAA5C,IAAyD,EAA3E;AACA,YAAME,QAAQ,GAAGC,2BAAe,GAAf,GAAqBR,IAAI,CAACG,KAAL,CAAWC,UAAX,CAAsBG,QAA3C,IAAuD,EAAxE;;AAEA,UAAIE,YAAGC,UAAH,CAAcT,KAAd,CAAJ,EAA0B;AACxBQ,oBAAGE,UAAH,CAAcV,KAAd;AACD;;AACD,UAAIQ,YAAGC,UAAH,CAAcL,SAAd,CAAJ,EAA8B;AAC5BI,oBAAGE,UAAH,CAAcN,SAAd;AACD;;AACD,UAAII,YAAGC,UAAH,CAAcH,QAAd,CAAJ,EAA6B;AAC3BE,oBAAGE,UAAH,CAAcJ,QAAd;AACD;;AAED,aAAO,KAAKK,MAAL,CAAYf,OAAZ,CAAP;AACD,KAhBM,CAAP;AAiBD;;AA/B8C;;eAiClC,IAAIL,mBAAJ,E","sourcesContent":["import fs from 'fs';\nimport { imagePath, originalPath, thumbnailPath } from '../uploadPath';\nimport HeroImage from '../models/hero_image';\nimport baseRepository from './baseRepository';\n\n/**\n * returns hero repo\n */\nclass HeroImageRepository extends baseRepository {\n  /**\n   * Init HeroImage modal.\n   */\n  constructor() {\n    super(HeroImage);\n  }\n\n  /**\n   * Call remove after image unlink.\n   *\n   * @param {*} imageId\n   */\n  removeImagebyId(imageId) {\n    return this.getById(imageId).then((data) => {\n      const image = imagePath + '/' + (data.model.attributes.image || '');\n      const thumbnail = thumbnailPath + '/' + data.model.attributes.thumbnail || '';\n      const original = originalPath + '/' + data.model.attributes.original || '';\n\n      if (fs.existsSync(image)) {\n        fs.unlinkSync(image);\n      }\n      if (fs.existsSync(thumbnail)) {\n        fs.unlinkSync(thumbnail);\n      }\n      if (fs.existsSync(original)) {\n        fs.unlinkSync(original);\n      }\n\n      return this.remove(imageId);\n    });\n  }\n}\nexport default new HeroImageRepository();\n"],"file":"heroImageRepository.js"}