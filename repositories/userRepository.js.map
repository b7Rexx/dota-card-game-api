{"version":3,"sources":["../../src/repositories/userRepository.js"],"names":["UserRepository","baseRepository","constructor","User","withRelated","accessToken","user","date","Date","setDate","getDate","type","token","id","expire_at","isAdmin"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;;;AAGA,MAAMA,cAAN,SAA6BC,uBAA7B,CAA4C;AAC1C;;;AAGAC,EAAAA,WAAW,GAAG;AACZ,UAAMC,aAAN;AACA,SAAKC,WAAL,GAAmB,CAAC,eAAD,CAAnB;AACD;AAED;;;;;;;;AAMAC,EAAAA,WAAW,CAACC,IAAD,EAAO;AAChB,UAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;AAEAD,IAAAA,IAAI,CAACE,OAAL,CAAaF,IAAI,CAACG,OAAL,KAAiB,CAA9B;AAEA,WAAO;AACLC,MAAAA,IAAI,EAAE,QADD;AAELC,MAAAA,KAAK,EAAE,0BAAYN,IAAI,CAACO,EAAjB,CAFF;AAGLC,MAAAA,SAAS,EAAEP,IAHN;AAILQ,MAAAA,OAAO,EAAET,IAAI,CAACS,OAAL,IAAgB,CAJpB;AAKLT,MAAAA,IAAI,EAAEA;AALD,KAAP;AAOD;;AA3ByC;;eA6B7B,IAAIN,cAAJ,E","sourcesContent":["import User from '../models/user';\nimport baseRepository from './baseRepository';\nimport { getJwtToken } from '../utils/jwtAuth';\n\n/**\n * returns user repo\n */\nclass UserRepository extends baseRepository {\n  /**\n   * Init User Modal.\n   */\n  constructor() {\n    super(User);\n    this.withRelated = ['relateRecords'];\n  }\n\n  /**\n   * Returns access token with expire time.\n   *\n   * @param {*} user\n   * @returns {*}\n   */\n  accessToken(user) {\n    const date = new Date();\n\n    date.setDate(date.getDate() + 1);\n\n    return {\n      type: 'bearer',\n      token: getJwtToken(user.id),\n      expire_at: date,\n      isAdmin: user.isAdmin || 0,\n      user: user,\n    };\n  }\n}\nexport default new UserRepository();\n"],"file":"userRepository.js"}