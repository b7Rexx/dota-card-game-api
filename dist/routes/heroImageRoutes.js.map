{"version":3,"sources":["../../src/routes/heroImageRoutes.js"],"names":["router","get","heroImageController","fetchAll","fetchById","post","heroImageValidator","upload","single","req","res","next","body","image","then","filename","original","thumbnail","create","put","findHeroImage","update","delete","remove"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEA;;;;AAGAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgBC,mBAAmB,CAACC,QAApC;AAEA;;;;AAGAH,MAAM,CAACC,GAAP,CAAW,MAAX,EAAmBC,mBAAmB,CAACE,SAAvC;AAEA;;;;AAGAJ,MAAM,CAACK,IAAP,CACE,GADF,EAEEC,sCAFF,EAGEC,gBAAOC,MAAP,CAAc,OAAd,CAHF,EAIE,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACxB,sCAAkBF,GAAG,CAACG,IAAJ,CAASC,KAA3B,EAAkCC,IAAlC,CAAwCC,QAAD,IAAc;AACnDN,IAAAA,GAAG,CAACG,IAAJ,CAASC,KAAT,GAAkB,SAAQE,QAAS,EAAnC;AACAN,IAAAA,GAAG,CAACG,IAAJ,CAASI,QAAT,GAAqB,YAAWD,QAAS,EAAzC;AACAN,IAAAA,GAAG,CAACG,IAAJ,CAASK,SAAT,GAAsB,aAAYF,QAAS,EAA3C;AACAJ,IAAAA,IAAI;AACL,GALD;AAMD,CAXH,EAYET,mBAAmB,CAACgB,MAZtB;AAeA;;;;AAGAlB,MAAM,CAACmB,GAAP,CACE,MADF,EAEEC,iCAFF,EAGEd,sCAHF,EAIEC,gBAAOC,MAAP,CAAc,OAAd,CAJF,EAKE,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACxB,sCAAkBF,GAAG,CAACG,IAAJ,CAASC,KAA3B,EAAkCC,IAAlC,CAAwCC,QAAD,IAAc;AACnDN,IAAAA,GAAG,CAACG,IAAJ,CAASC,KAAT,GAAkB,SAAQE,QAAS,EAAnC;AACAN,IAAAA,GAAG,CAACG,IAAJ,CAASI,QAAT,GAAqB,YAAWD,QAAS,EAAzC;AACAN,IAAAA,GAAG,CAACG,IAAJ,CAASK,SAAT,GAAsB,aAAYF,QAAS,EAA3C;AACAJ,IAAAA,IAAI;AACL,GALD;AAMD,CAZH,EAaET,mBAAmB,CAACmB,MAbtB;AAgBA;;;;AAGArB,MAAM,CAACsB,MAAP,CAAc,MAAd,EAAsBF,iCAAtB,EAAqClB,mBAAmB,CAACqB,MAAzD;eAEevB,M","sourcesContent":["import { Router } from 'express';\n\nimport upload from '../middlewares/upload';\nimport { saveResizedImages } from '../utils/uploadImage';\nimport * as heroImageController from '../controllers/heroImages';\nimport { findHeroImage, heroImageValidator } from '../validators/heroImageValidator';\n\nconst router = Router();\n\n/**\n * GET /api/heroes\n */\nrouter.get('/', heroImageController.fetchAll);\n\n/**\n * GET /api/heroes/:id\n */\nrouter.get('/:id', heroImageController.fetchById);\n\n/**\n * POST /api/heroes\n */\nrouter.post(\n  '/',\n  heroImageValidator,\n  upload.single('image'),\n  function (req, res, next) {\n    saveResizedImages(req.body.image).then((filename) => {\n      req.body.image = `image_${filename}`;\n      req.body.original = `original_${filename}`;\n      req.body.thumbnail = `thumbnail_${filename}`;\n      next();\n    });\n  },\n  heroImageController.create\n);\n\n/**\n * PUT /api/heroes/:id\n */\nrouter.put(\n  '/:id',\n  findHeroImage,\n  heroImageValidator,\n  upload.single('image'),\n  function (req, res, next) {\n    saveResizedImages(req.body.image).then((filename) => {\n      req.body.image = `image_${filename}`;\n      req.body.original = `original_${filename}`;\n      req.body.thumbnail = `thumbnail_${filename}`;\n      next();\n    });\n  },\n  heroImageController.update\n);\n\n/**\n * DELETE /api/heroes/:id\n */\nrouter.delete('/:id', findHeroImage, heroImageController.remove);\n\nexport default router;\n"],"file":"heroImageRoutes.js"}