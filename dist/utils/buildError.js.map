{"version":3,"sources":["../../src/utils/buildError.js"],"names":["buildError","err","isJoi","code","HttpStatus","BAD_REQUEST","message","getStatusText","details","map","param","path","join","isBoom","output","statusCode","payload","error","INTERNAL_SERVER_ERROR"],"mappings":";;;;;;;AAAA;;;;AAEA;;;;;;AAMA,SAASA,UAAT,CAAoBC,GAApB,EAAyB;AACvB;AACA,MAAIA,GAAG,CAACC,KAAR,EAAe;AACb,WAAO;AACLC,MAAAA,IAAI,EAAEC,yBAAWC,WADZ;AAELC,MAAAA,OAAO,EAAEF,yBAAWG,aAAX,CAAyBH,yBAAWC,WAApC,CAFJ;AAGLG,MAAAA,OAAO,EACLP,GAAG,CAACO,OAAJ,IACAP,GAAG,CAACO,OAAJ,CAAYC,GAAZ,CAAgBR,GAAG,IAAI;AACrB,eAAO;AACLK,UAAAA,OAAO,EAAEL,GAAG,CAACK,OADR;AAELI,UAAAA,KAAK,EAAET,GAAG,CAACU,IAAJ,CAASC,IAAT,CAAc,GAAd;AAFF,SAAP;AAID,OALD;AALG,KAAP;AAYD,GAfsB,CAiBvB;;;AACA,MAAIX,GAAG,CAACY,MAAR,EAAgB;AACd,WAAO;AACLV,MAAAA,IAAI,EAAEF,GAAG,CAACa,MAAJ,CAAWC,UADZ;AAELT,MAAAA,OAAO,EAAEL,GAAG,CAACa,MAAJ,CAAWE,OAAX,CAAmBV,OAAnB,IAA8BL,GAAG,CAACa,MAAJ,CAAWE,OAAX,CAAmBC;AAFrD,KAAP;AAID,GAvBsB,CAyBvB;;;AACA,SAAO;AACLd,IAAAA,IAAI,EAAEC,yBAAWc,qBADZ;AAELZ,IAAAA,OAAO,EAAEF,yBAAWG,aAAX,CAAyBH,yBAAWc,qBAApC;AAFJ,GAAP;AAID;;eAEclB,U","sourcesContent":["import HttpStatus from 'http-status-codes';\r\n\r\n/**\r\n * Build error response for validation errors.\r\n *\r\n * @param   {Error} err\r\n * @returns {Object}\r\n */\r\nfunction buildError(err) {\r\n  // Validation errors\r\n  if (err.isJoi) {\r\n    return {\r\n      code: HttpStatus.BAD_REQUEST,\r\n      message: HttpStatus.getStatusText(HttpStatus.BAD_REQUEST),\r\n      details:\r\n        err.details &&\r\n        err.details.map(err => {\r\n          return {\r\n            message: err.message,\r\n            param: err.path.join('.')\r\n          };\r\n        })\r\n    };\r\n  }\r\n\r\n  // HTTP errors\r\n  if (err.isBoom) {\r\n    return {\r\n      code: err.output.statusCode,\r\n      message: err.output.payload.message || err.output.payload.error\r\n    };\r\n  }\r\n\r\n  // Return INTERNAL_SERVER_ERROR for all other cases\r\n  return {\r\n    code: HttpStatus.INTERNAL_SERVER_ERROR,\r\n    message: HttpStatus.getStatusText(HttpStatus.INTERNAL_SERVER_ERROR)\r\n  };\r\n}\r\n\r\nexport default buildError;\r\n"],"file":"buildError.js"}