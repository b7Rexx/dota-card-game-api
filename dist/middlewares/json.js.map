{"version":3,"sources":["../../src/middlewares/json.js"],"names":["json","request","response","next","body","method","disallowedHttpHeaders","is","includes","Boom","badRequest"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA;;;;;;;AAOe,SAASA,IAAT,CAAcC,OAAd,EAAuBC,QAAvB,EAAiCC,IAAjC,EAAuC;AACpD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAmBJ,OAAzB;AACA,QAAMK,qBAAqB,GAAG,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB,CAA9B;;AAEA,MAAIL,OAAO,CAACM,EAAR,CAAW,kBAAX,KAAkCD,qBAAqB,CAACE,QAAtB,CAA+BH,MAA/B,CAAlC,IAA4E,uBAASD,IAAT,CAAhF,EAAgG;AAC9F,UAAMK,cAAKC,UAAL,CAAgB,YAAhB,CAAN;AACD;;AAEDP,EAAAA,IAAI;AACL","sourcesContent":["import Boom from '@hapi/boom';\r\nimport _isEmpty from 'lodash/isEmpty';\r\n\r\n/**\r\n * Middleware to handle empty JSON body requests and other edge cases if any.\r\n *\r\n * @param  {Object}   request\r\n * @param  {Object}   response\r\n * @param  {Function} next\r\n */\r\nexport default function json(request, response, next) {\r\n  const { body, method } = request;\r\n  const disallowedHttpHeaders = ['PUT', 'POST', 'PATCH'];\r\n\r\n  if (request.is('application/json') && disallowedHttpHeaders.includes(method) && _isEmpty(body)) {\r\n    throw Boom.badRequest('Empty JSON');\r\n  }\r\n\r\n  next();\r\n}\r\n"],"file":"json.js"}