{"version":3,"sources":["../../src/validators/recordValidator.js"],"names":["schema","Joi","object","game_id","number","label","required","user_id","points","winner","boolean","default","recordValidator","req","res","next","body","then","catch","err","findRecord","recordRepository","getById","params","id"],"mappings":";;;;;;;;AAAA;;AAEA;;AACA;;;;AAEA;AACA,MAAMA,MAAM,GAAGC,aAAIC,MAAJ,CAAW;AACxBC,EAAAA,OAAO,EAAEF,aAAIG,MAAJ,GAAaC,KAAb,CAAmB,QAAnB,EAA6BC,QAA7B,EADe;AAExBC,EAAAA,OAAO,EAAEN,aAAIG,MAAJ,GAAaC,KAAb,CAAmB,QAAnB,EAA6BC,QAA7B,EAFe;AAGxBE,EAAAA,MAAM,EAAEP,aAAIG,MAAJ,GAAaC,KAAb,CAAmB,QAAnB,EAA6BC,QAA7B,EAHgB;AAIxBG,EAAAA,MAAM,EAAER,aAAIS,OAAJ,GAAcL,KAAd,CAAoB,QAApB,EAA8BM,OAA9B,CAAsC,CAAtC;AAJgB,CAAX,CAAf;AAOA;;;;;;;;;;AAQA,SAASC,eAAT,CAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACvC,SAAO,uBAASF,GAAG,CAACG,IAAb,EAAmBhB,MAAnB,EACJiB,IADI,CACC,MAAMF,IAAI,EADX,EAEJG,KAFI,CAEGC,GAAD,IAASJ,IAAI,CAACI,GAAD,CAFf,CAAP;AAGD;AAED;;;;;;;;;;AAQA,SAASC,UAAT,CAAoBP,GAApB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoC;AAClC,SAAOM,0BACJC,OADI,CACIT,GAAG,CAACU,MAAJ,CAAWC,EADf,EAEJP,IAFI,CAEC,MAAMF,IAAI,EAFX,EAGJG,KAHI,CAGGC,GAAD,IAASJ,IAAI,CAACI,GAAD,CAHf,CAAP;AAID","sourcesContent":["import Joi from '@hapi/joi';\r\n\r\nimport validate from '../utils/validate';\r\nimport recordRepository from '../repositories/recordRepository';\r\n\r\n// Validation schema\r\nconst schema = Joi.object({\r\n  game_id: Joi.number().label('GameId').required(),\r\n  user_id: Joi.number().label('UserId').required(),\r\n  points: Joi.number().label('Points').required(),\r\n  winner: Joi.boolean().label('Winner').default(0),\r\n});\r\n\r\n/**\r\n * Validate create/update record request.\r\n *\r\n * @param   {Object}   req\r\n * @param   {Object}   res\r\n * @param   {Function} next\r\n * @returns {Promise}\r\n */\r\nfunction recordValidator(req, res, next) {\r\n  return validate(req.body, schema)\r\n    .then(() => next())\r\n    .catch((err) => next(err));\r\n}\r\n\r\n/**\r\n * Validate records existence.\r\n *\r\n * @param   {Object}   req\r\n * @param   {Object}   res\r\n * @param   {Function} next\r\n * @returns {Promise}\r\n */\r\nfunction findRecord(req, res, next) {\r\n  return recordRepository\r\n    .getById(req.params.id)\r\n    .then(() => next())\r\n    .catch((err) => next(err));\r\n}\r\n\r\nexport { findRecord, recordValidator };\r\n"],"file":"recordValidator.js"}