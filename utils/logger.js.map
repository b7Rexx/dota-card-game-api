{"version":3,"sources":["../../src/utils/logger.js"],"names":["LOG_DIR","process","env","LOG_LEVEL","fs","existsSync","mkdirSync","logger","winston","createLogger","transports","Console","format","combine","colorize","simple","level","DailyRotateFile","timestamp","json","maxFiles","dirname","datePattern","filename","logStream","write","message","info","toString"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;;;;;;;AAEA;AACA,MAAMA,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYF,OAAZ,IAAuB,MAAvC;AACA,MAAMG,SAAS,GAAGF,OAAO,CAACC,GAAR,CAAYC,SAAZ,IAAyB,MAA3C,C,CAEA;;AACA,IAAI,CAACC,YAAGC,UAAH,CAAcL,OAAd,CAAL,EAA6B;AAC3BI,cAAGE,SAAH,CAAaN,OAAb;AACD;AAED;;;;;AAGA,MAAMO,MAAM,GAAGC,iBAAQC,YAAR,CAAqB;AAClCC,EAAAA,UAAU,EAAE,CACV,IAAIF,iBAAQE,UAAR,CAAmBC,OAAvB,CAA+B;AAC7BC,IAAAA,MAAM,EAAEA,gBAAOC,OAAP,CAAeD,gBAAOE,QAAP,EAAf,EAAkCF,gBAAOG,MAAP,EAAlC,CADqB;AAE7BC,IAAAA,KAAK,EAAE;AAFsB,GAA/B,CADU,EAKV,IAAIR,iBAAQE,UAAR,CAAmBO,eAAvB,CAAuC;AACrCL,IAAAA,MAAM,EAAEA,gBAAOC,OAAP,CAAeD,gBAAOM,SAAP,EAAf,EAAmCN,gBAAOO,IAAP,EAAnC,CAD6B;AAErCC,IAAAA,QAAQ,EAAE,KAF2B;AAGrCJ,IAAAA,KAAK,EAAEb,SAH8B;AAIrCkB,IAAAA,OAAO,EAAErB,OAJ4B;AAKrCsB,IAAAA,WAAW,EAAE,YALwB;AAMrCC,IAAAA,QAAQ,EAAE;AAN2B,GAAvC,CALU;AADsB,CAArB,CAAf;;AAiBO,MAAMC,SAAS,GAAG;AACvB;;;;;AAKAC,EAAAA,KAAK,CAACC,OAAD,EAAU;AACbnB,IAAAA,MAAM,CAACoB,IAAP,CAAYD,OAAO,CAACE,QAAR,EAAZ;AACD;;AARsB,CAAlB;;eAWQrB,M","sourcesContent":["import fs from 'fs';\nimport winston, { format } from 'winston';\n\nimport 'winston-daily-rotate-file';\n\n// Use LOG_DIR from env\nconst LOG_DIR = process.env.LOG_DIR || 'logs';\nconst LOG_LEVEL = process.env.LOG_LEVEL || 'info';\n\n// Create log directory if it does not exist\nif (!fs.existsSync(LOG_DIR)) {\n  fs.mkdirSync(LOG_DIR);\n}\n\n/**\n * Create a new winston logger.\n */\nconst logger = winston.createLogger({\n  transports: [\n    new winston.transports.Console({\n      format: format.combine(format.colorize(), format.simple()),\n      level: 'info'\n    }),\n    new winston.transports.DailyRotateFile({\n      format: format.combine(format.timestamp(), format.json()),\n      maxFiles: '14d',\n      level: LOG_LEVEL,\n      dirname: LOG_DIR,\n      datePattern: 'YYYY-MM-DD',\n      filename: '%DATE%-debug.log'\n    })\n  ]\n});\n\nexport const logStream = {\n  /**\n   * A writable stream for winston logger.\n   *\n   * @param {any} message\n   */\n  write(message) {\n    logger.info(message.toString());\n  }\n};\n\nexport default logger;\n"],"file":"logger.js"}