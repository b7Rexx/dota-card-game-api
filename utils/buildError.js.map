{"version":3,"sources":["../../src/utils/buildError.js"],"names":["buildError","err","isJoi","code","HttpStatus","BAD_REQUEST","message","getStatusText","details","map","param","path","join","isBoom","output","statusCode","payload","error","INTERNAL_SERVER_ERROR"],"mappings":";;;;;;;AAAA;;;;AAEA;;;;;;AAMA,SAASA,UAAT,CAAoBC,GAApB,EAAyB;AACvB;AACA,MAAIA,GAAG,CAACC,KAAR,EAAe;AACb,WAAO;AACLC,MAAAA,IAAI,EAAEC,yBAAWC,WADZ;AAELC,MAAAA,OAAO,EAAEF,yBAAWG,aAAX,CAAyBH,yBAAWC,WAApC,CAFJ;AAGLG,MAAAA,OAAO,EACLP,GAAG,CAACO,OAAJ,IACAP,GAAG,CAACO,OAAJ,CAAYC,GAAZ,CAAgBR,GAAG,IAAI;AACrB,eAAO;AACLK,UAAAA,OAAO,EAAEL,GAAG,CAACK,OADR;AAELI,UAAAA,KAAK,EAAET,GAAG,CAACU,IAAJ,CAASC,IAAT,CAAc,GAAd;AAFF,SAAP;AAID,OALD;AALG,KAAP;AAYD,GAfsB,CAiBvB;;;AACA,MAAIX,GAAG,CAACY,MAAR,EAAgB;AACd,WAAO;AACLV,MAAAA,IAAI,EAAEF,GAAG,CAACa,MAAJ,CAAWC,UADZ;AAELT,MAAAA,OAAO,EAAEL,GAAG,CAACa,MAAJ,CAAWE,OAAX,CAAmBV,OAAnB,IAA8BL,GAAG,CAACa,MAAJ,CAAWE,OAAX,CAAmBC;AAFrD,KAAP;AAID,GAvBsB,CAyBvB;;;AACA,SAAO;AACLd,IAAAA,IAAI,EAAEC,yBAAWc,qBADZ;AAELZ,IAAAA,OAAO,EAAEF,yBAAWG,aAAX,CAAyBH,yBAAWc,qBAApC;AAFJ,GAAP;AAID;;eAEclB,U","sourcesContent":["import HttpStatus from 'http-status-codes';\n\n/**\n * Build error response for validation errors.\n *\n * @param   {Error} err\n * @returns {Object}\n */\nfunction buildError(err) {\n  // Validation errors\n  if (err.isJoi) {\n    return {\n      code: HttpStatus.BAD_REQUEST,\n      message: HttpStatus.getStatusText(HttpStatus.BAD_REQUEST),\n      details:\n        err.details &&\n        err.details.map(err => {\n          return {\n            message: err.message,\n            param: err.path.join('.')\n          };\n        })\n    };\n  }\n\n  // HTTP errors\n  if (err.isBoom) {\n    return {\n      code: err.output.statusCode,\n      message: err.output.payload.message || err.output.payload.error\n    };\n  }\n\n  // Return INTERNAL_SERVER_ERROR for all other cases\n  return {\n    code: HttpStatus.INTERNAL_SERVER_ERROR,\n    message: HttpStatus.getStatusText(HttpStatus.INTERNAL_SERVER_ERROR)\n  };\n}\n\nexport default buildError;\n"],"file":"buildError.js"}